<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
		<!-- <link rel="stylesheet" href="stylesheets/style.css" type="text/css" /> -->
		<title>calander!</title>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->
	</head>

	<body>
    <h2>Create new calendar</h2>

    <div>
    <form>
  <label for="usr">Name of calander:</label>
  <input type="text" class="form-control" id="calendarName" required>
	<br>
	<label for="usr">Description of calander:</label>
  <textarea type="text" class="form-control" id="calendarDiscription" required></textarea>
   </div>
   <h2>Invite members</h2>
   <div id="userRows">
		 <label for="usr">Email</label>
		 <input type="email" class="form-control" id="email0" placeholder="email@address.com" required>
		 <label class="pwd">Name</label>
		 <input type="name" class="form-control" id="firstName0" placeholder="Full Name" required>
		 <input type="name" class="form-control" id="lastName0" placeholder="Full Name" required>
    </div>
    <div>
    	<button type="button" id="addAnother">+ Add another</button>
    </div>
    <div>
    	<button type="submit" id="gotoCalendar">Go to calendar ></button>
    </div>
    </form>
	</body>
<script type="text/javascript">

var newCalendar = {
	calendarName: "",
	calendarDescription: "",
	users: []
};

// var users=[];
$(document).ready(function(){

	var userCounter=0;


	$("#addAnother").on("click", function() {
		console.log($("#name"+userCounter).val());
		console.log($("#email"+userCounter).val());


		userCounter++;
		console.log("userCounter = " + userCounter)

		$("#userRows").append('<div><label for="usr">Email</label><input type="email" class="form-control" id="email'+userCounter+'" placeholder="email@address.com" required><label class="pwd">Name</label><input type="name" class="form-control" id="name'+userCounter+'" placeholder="Full Name" required></div>');
	});

	$("#gotoCalendar").on("click", function() {
		userCounter++;

		newCalendar.calendarName = $("#calendarName").val();
		newCalendar.calendarDescription = $("#calendarDiscription").val();

		// Go to calendar button was clicked, do this stuff...
		for (var i = 0; i < userCounter; i++) {

			var obj = {
				firstName: $("#firstName").val(),
				lastName: $("#lastName".val(),
				email: $("#email").val()
			}

			newCalendar.users.push(obj);

		}
		console.log(newCalendar);

		//send newly created calendar information to db
		$.post("api/calendar", newCalendar);
	});

});

</script>
</html>
